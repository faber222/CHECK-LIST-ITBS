/*
 * This source file was generated by the Gradle 'init' task
 */
package org.example;

import com.formdev.flatlaf.FlatDarculaLaf;
import org.example.view.MainWindow;
import org.example.templates.MainMDIFrame;
import java.util.prefs.Preferences;

import javax.swing.SwingUtilities;
import javax.swing.UIManager;

import com.formdev.flatlaf.FlatDarkLaf;
import com.formdev.flatlaf.FlatIntelliJLaf;
import com.formdev.flatlaf.FlatLightLaf;
import com.formdev.flatlaf.themes.FlatMacDarkLaf;
import com.formdev.flatlaf.themes.FlatMacLightLaf;
import java.awt.Color;
import java.awt.Insets;

public class App {
    private static boolean darkMode = true; // Tema padrão: Dark

    public static void main(String[] args) {
        // Carrega a preferência salva
        Preferences prefs = Preferences.userNodeForPackage(App.class);
        darkMode = prefs.getBoolean("DARK_MODE", true); // Default: Dark
        // Aplica o tema inicial
        atualizarTemaGlobal(darkMode);

        // Cria e exibe a janela principal
        SwingUtilities.invokeLater(() -> {
            MainWindow slaveMDIFrame = new MainWindow();
            slaveMDIFrame.start();
        });
    }

    // Método estático para trocar o tema (acessível de qualquer lugar)
    public static void atualizarTemaGlobal(boolean isDarkMode) {
        try {
            darkMode = isDarkMode;
            Preferences prefs = Preferences.userNodeForPackage(App.class);
            prefs.putBoolean("DARK_MODE", darkMode);
            if (isDarkMode) {
                UIManager.setLookAndFeel(new FlatMacDarkLaf());
            } else {
                UIManager.setLookAndFeel(new FlatMacLightLaf());
            }
            UIManager.put( "ScrollBar.trackArc", 999 );
            UIManager.put( "ScrollBar.thumbArc", 999 );
            UIManager.put( "ScrollBar.trackInsets", new Insets( 2, 4, 2, 4 ) );
            UIManager.put( "ScrollBar.thumbInsets", new Insets( 2, 2, 2, 2 ) );
            UIManager.put( "ScrollBar.track", new Color( 0xe0e0e0 ) );
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    // Getter para o tema atual
    public static boolean isDarkMode() {
        return darkMode;
    }
}
